@model ecommerce_temp.Models.Product

@{
    ViewData["Title"] = "Details";
}

<head>
    <link rel="stylesheet" href="/css/ProductDetail.css" asp-append-version="true">
</head>

<div class="page-content">
    <div>
        <a asp-action="Edit" asp-route-id="@Model?.ProductId">Edit</a> |
        <a asp-action="Index">Back to List</a>
    </div>
    <section class="landing-page-section">
        <div class="top">
            <h2 class="Product-Name">
                @Model.Name
            </h2>
        </div>
        <div class="divider"></div>
        <div></div>
        <div class="detail-content">
            <div class="pricing-card">
                <img src="@Url.Content(@Model.ImageUrl)" alt="">
                <div class="divider"></div>
                <ul>
                    <li>
                        content
                    </li>
                    <li>
                        @Model.Description
                    </li>
                </ul>
            </div>
            <div class="pricing-card pricing-card--primary">
                <div class="pricing-card__price">
                    @Model.Price
                </div>
                <div class="divider"></div>
                <div class="group-button">
                    <ul>
                        <li>
                            <a class="enroll" title="Enroll Now" href="">
                                Buy
                            </a>
                        </li>
                        <li>
                            <a id="addToCartForm" class="enroll" title="add" asp-action="Add" asp-controller="Cart"
                                asp-route-id="@Model.ProductId">
                                Add to Cart
                            </a>
                            <form id="addToCartForm" method="post" asp-action="Add" asp-controller="Cart"
                                asp-route-productid="@Model.ProductId">
                                @Html.AntiForgeryToken()
                                <button type="submit" class="enroll" title="Add">Add to Cart</button>
                            </form>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </section>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $("#addToCartForm").submit(function (e) {
            e.preventDefault();
            $.ajax({
                type: "POST",
                url: $(this).attr("action"),
                data: $(this).serialize(),
                success: function (response) {
                    alert("Item added to cart!");
                },
                error: function (xhr, status, error) {
                    alert("Error adding item to cart: " + error);
                }
            });
        });
    });
</script>
@*
<div>
<a asp-action="Edit" asp-route-id="@Model?.ProductId">Edit</a> |
<a asp-action="Index">Back to List</a>
</div> *@
